import{Bb as d,E as a,G as o,J as s,aa as r,sb as i}from"./chunk-PZLIYHRI.js";import{a as p}from"./chunk-2NFLSA4Y.js";var n=class l{constructor(e){this.http=e}apiUrl="https://empleaveappnode.onrender.com/api/v1/user";state=r({employees:[],isEditMode:!1,employeeToEdit:[],loading:!1});employees=i(()=>this.state().employees);isEditMode=i(()=>this.state().isEditMode);employeeToEdit=i(()=>this.state().employeeToEdit);loading=i(()=>this.state().loading);GellAllEmployee(){return this.patchState({loading:!0}),this.http.get(`${this.apiUrl}/GetAllEmployees`).pipe(a(e=>{console.log(e.data.AllEmployees),this.patchState({employees:e.data.AllEmployees,loading:!1})}))}createNewEmp(e){return this.patchState({loading:!0}),this.http.post(`${this.apiUrl}/CreateEmployee`,e).pipe(a(()=>{this.GellAllEmployee().subscribe()}))}GetEmployeeById(e){return this.patchState({loading:!0}),this.http.get(`${this.apiUrl}/GetEmpById/${e}`).pipe(a(t=>{this.patchState({employeeToEdit:t.data.EmpById,loading:!1})}))}UpdateEmployee(e,t){return this.patchState({loading:!0}),this.http.patch(`${this.apiUrl}/UpdateEmp/${e}`,t).pipe(a(()=>{this.patchState({isEditMode:!1,employeeToEdit:null}),this.GellAllEmployee().subscribe()}))}DeleteEmployee(e){return this.patchState({loading:!0}),this.http.delete(`${this.apiUrl}/DeleteEmployee/${e}`).pipe(a(()=>{this.GellAllEmployee().subscribe()}))}ActiveEmployeeEditMode(){this.patchState({isEditMode:!0})}ResetEmployeeEditMode(){this.patchState({isEditMode:!1,employeeToEdit:null})}patchState(e){this.state.update(t=>p(p({},t),e))}static \u0275fac=function(t){return new(t||l)(s(d))};static \u0275prov=o({token:l,factory:l.\u0275fac,providedIn:"root"})};export{n as a};
